Build:
  InstanceType: g4dn.4xlarge
  # Deep Learning Base OSS Nvidia Driver GPU AMI (Ubuntu 20.04) 20240314 / us-west-2
  #
  # See also: https://docs.aws.amazon.com/dlami/latest/devguide/appendix-ami-release-notes.html
  #
  # Cfn start: 14:52:50  UTC+0800
  # Cfn end  : 15:40:50. UTC+0800
  # Total    : ~48m
  ParentImage: ami-00cf0cc1497fb7c0c

  ## Not recommended for DLAMI. If enabled, see [README.md => 3. Customize DLAMI](README.md#3-customize-dlami)
  #UpdateOsPackages:
  #  Enabled: true

  # If below enabled, build time becomes faster.
  # Cfn start: 18:13:17 SGT
  # Cfn del  : 18:51:15 SGT
  # Total    : ~38m
  Components:
    - Type: arn
      Value: arn:aws:imagebuilder:us-west-2:159553542841:component/marcverdpclusternodcvcomponent/1.0.0/1

Image:
  RootVolume:
    Encrypted: false

    # https://docs.aws.amazon.com/parallelcluster/latest/ug/build-Image-v3.html#yaml-build-image-Image-RootVolume-Size
    # Size (Optional, Integer)
    #   Specifies the size of the root volume for the image, in GiB. The default
    #   size is the size of the ParentImage plus 27 GiB.
    Size: 75

  Tags:
    - Key: Name
      Value: pc-dlami-ub2004-base-gpu
    - Key: base_ami_id
      Value: ami-00cf0cc1497fb7c0c
    - Key: base_ami_name
      Value: "Deep Learning Base OSS Nvidia Driver GPU AMI (Ubuntu 20.04) 20240314 / us-west-2"

# Disclaimer: DevSettings is undocumented and subject to change.
DevSettings:
  ## DO NOT enable below. It's left here for FYI only. This actually apt-get install an lts kernel
  ## and symlink vmlinuz.old to the lts kernel.
  ##
  ## See:
  ## - disable-update-kernel.log
  ## - aws-parallelcluster/cli/src/pcluster/resources/imagebuilder/update_and_reboot.yaml
  #DisableKernelUpdate: True

  DistributionConfiguration:
    Regions: us-east-1,us-west-2

